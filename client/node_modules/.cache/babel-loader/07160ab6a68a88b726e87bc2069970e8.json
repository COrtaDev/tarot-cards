{"ast":null,"code":"/**\n * @module cheerio/css\n */\nvar domEach = require('../utils').domEach;\n\nvar toString = Object.prototype.toString;\n/**\n * Get the value of a style property for the first element in the set of\n * matched elements or set one or more CSS properties for every matched\n * element.\n *\n * @param {string|object} prop - The name of the property.\n * @param {string} [val] - If specified the new value.\n * @returns {self}\n *\n * @see {@link http://api.jquery.com/css/}\n */\n\nexports.css = function (prop, val) {\n  if (arguments.length === 2 || // When `prop` is a \"plain\" object\n  toString.call(prop) === '[object Object]') {\n    return domEach(this, function (idx, el) {\n      setCss(el, prop, val, idx);\n    });\n  }\n\n  return getCss(this[0], prop);\n};\n/**\n * Set styles of all elements.\n *\n * @param {object} el - Element to set style of.\n * @param {string|object} prop - Name of property.\n * @param {string} val - Value to set property to.\n * @param {number} [idx] - Optional index within the selection.\n * @returns {self}\n * @private\n */\n\n\nfunction setCss(el, prop, val, idx) {\n  if ('string' == typeof prop) {\n    var styles = getCss(el);\n\n    if (typeof val === 'function') {\n      val = val.call(el, idx, styles[prop]);\n    }\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if ('object' == typeof prop) {\n    Object.keys(prop).forEach(function (k) {\n      setCss(el, k, prop[k]);\n    });\n  }\n}\n/**\n * Get parsed styles of the first element.\n *\n * @param {node} el - Element to get styles from.\n * @param {string} prop - Name of the prop.\n * @returns {object}\n * @private\n */\n\n\nfunction getCss(el, prop) {\n  if (!el || !el.attribs) {\n    return undefined;\n  }\n\n  var styles = parse(el.attribs.style);\n\n  if (typeof prop === 'string') {\n    return styles[prop];\n  } else if (Array.isArray(prop)) {\n    var newStyles = {};\n    prop.forEach(function (item) {\n      if (styles[item] != null) {\n        newStyles[item] = styles[item];\n      }\n    });\n    return newStyles;\n  }\n\n  return styles;\n}\n/**\n * Stringify `obj` to styles.\n *\n * @param {object} obj - Object to stringify.\n * @returns {object}\n * @private\n */\n\n\nfunction stringify(obj) {\n  return Object.keys(obj || {}).reduce(function (str, prop) {\n    return str += '' + (str ? ' ' : '') + prop + ': ' + obj[prop] + ';';\n  }, '');\n}\n/**\n * Parse `styles`.\n *\n * @param {string} styles - Styles to be parsed.\n * @returns {object}\n * @private\n */\n\n\nfunction parse(styles) {\n  styles = (styles || '').trim();\n  if (!styles) return {};\n  return styles.split(';').reduce(function (obj, str) {\n    var n = str.indexOf(':'); // skip if there is no :, or if it is the first/last character\n\n    if (n < 1 || n === str.length - 1) return obj;\n    obj[str.slice(0, n).trim()] = str.slice(n + 1).trim();\n    return obj;\n  }, {});\n}","map":{"version":3,"sources":["/home/conrad/Documents/tarot/tarot-cards/node_modules/cheerio/lib/api/css.js"],"names":["domEach","require","toString","Object","prototype","exports","css","prop","val","arguments","length","call","idx","el","setCss","getCss","styles","attribs","style","stringify","keys","forEach","k","undefined","parse","Array","isArray","newStyles","item","obj","reduce","str","trim","split","n","indexOf","slice"],"mappings":"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","sourcesContent":["/**\n * @module cheerio/css\n */\n\nvar domEach = require('../utils').domEach;\n\nvar toString = Object.prototype.toString;\n\n/**\n * Get the value of a style property for the first element in the set of\n * matched elements or set one or more CSS properties for every matched\n * element.\n *\n * @param {string|object} prop - The name of the property.\n * @param {string} [val] - If specified the new value.\n * @returns {self}\n *\n * @see {@link http://api.jquery.com/css/}\n */\nexports.css = function (prop, val) {\n  if (\n    arguments.length === 2 ||\n    // When `prop` is a \"plain\" object\n    toString.call(prop) === '[object Object]'\n  ) {\n    return domEach(this, function (idx, el) {\n      setCss(el, prop, val, idx);\n    });\n  }\n  return getCss(this[0], prop);\n};\n\n/**\n * Set styles of all elements.\n *\n * @param {object} el - Element to set style of.\n * @param {string|object} prop - Name of property.\n * @param {string} val - Value to set property to.\n * @param {number} [idx] - Optional index within the selection.\n * @returns {self}\n * @private\n */\nfunction setCss(el, prop, val, idx) {\n  if ('string' == typeof prop) {\n    var styles = getCss(el);\n    if (typeof val === 'function') {\n      val = val.call(el, idx, styles[prop]);\n    }\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if ('object' == typeof prop) {\n    Object.keys(prop).forEach(function (k) {\n      setCss(el, k, prop[k]);\n    });\n  }\n}\n\n/**\n * Get parsed styles of the first element.\n *\n * @param {node} el - Element to get styles from.\n * @param {string} prop - Name of the prop.\n * @returns {object}\n * @private\n */\nfunction getCss(el, prop) {\n  if (!el || !el.attribs) {\n    return undefined;\n  }\n\n  var styles = parse(el.attribs.style);\n  if (typeof prop === 'string') {\n    return styles[prop];\n  } else if (Array.isArray(prop)) {\n    var newStyles = {};\n    prop.forEach(function (item) {\n      if (styles[item] != null) {\n        newStyles[item] = styles[item];\n      }\n    });\n    return newStyles;\n  }\n  return styles;\n}\n\n/**\n * Stringify `obj` to styles.\n *\n * @param {object} obj - Object to stringify.\n * @returns {object}\n * @private\n */\nfunction stringify(obj) {\n  return Object.keys(obj || {}).reduce(function (str, prop) {\n    return (str += '' + (str ? ' ' : '') + prop + ': ' + obj[prop] + ';');\n  }, '');\n}\n\n/**\n * Parse `styles`.\n *\n * @param {string} styles - Styles to be parsed.\n * @returns {object}\n * @private\n */\nfunction parse(styles) {\n  styles = (styles || '').trim();\n\n  if (!styles) return {};\n\n  return styles.split(';').reduce(function (obj, str) {\n    var n = str.indexOf(':');\n    // skip if there is no :, or if it is the first/last character\n    if (n < 1 || n === str.length - 1) return obj;\n    obj[str.slice(0, n).trim()] = str.slice(n + 1).trim();\n    return obj;\n  }, {});\n}\n"]},"metadata":{},"sourceType":"script"}