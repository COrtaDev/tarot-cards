{"ast":null,"code":"import wiki from 'wikijs';\nexport async function getMajorArcana() {\n  const page = await wiki().page('Major_Arcana');\n  const [tables] = await page.tables();\n  let deck = await buildDeck(tables);\n\n  for (let i = 0; i < deck.length; i++) {\n    deck[i]['url'] = await getImgUrl(deck[i].queryString);\n  }\n\n  return {\n    id: 'major',\n    deckName: 'The Major Arcana',\n    cards: deck\n  };\n}\n;\nexport async function getMinorArcana() {\n  const page = await wiki().page('Minor_Arcana');\n  const images = await page.images();\n  const links = await page.links(); // console.log(links);\n\n  const deck = buildSuits(images); // console.log(deck);\n  //We would like to add a queryString to each card in the minor arcana\n\n  addQueryStringToMinor(deck, links);\n  return {\n    id: 'minor',\n    deckName: \"The Minor Arcana\",\n    cards: deck\n  };\n}\n;\n\nfunction buildDeck(tables) {\n  const deck = tables.map(table => {\n    const queryString = makeQueryString(table.card);\n\n    if (table.card.startsWith(\"Strength\")) {\n      return {\n        cardName: \"Strength\",\n        queryString: queryString\n      };\n    }\n\n    ;\n\n    if (table.card.startsWith(\"Justice\")) {\n      return {\n        cardName: \"Justice\",\n        queryString: queryString\n      };\n    }\n\n    ;\n    return {\n      cardName: table.card,\n      queryString: queryString\n    };\n  });\n  return deck;\n}\n\n;\n\nfunction makeQueryString(str) {\n  if (str.startsWith(\"Strength\")) str = \"Strength\";\n  if (str.startsWith(\"Justice\")) str = \"Justice\";\n  str = str.replaceAll(\" \", \"_\");\n  str = str + \"_(Tarot_card)\";\n  return str;\n}\n\n;\n\nfunction addQueryStringToMinor(deck, links) {\n  console.log(deck, links);\n  deck.forEach(suit => {\n    suit.forEach(card => {\n      console.log(card);\n      let queries = links.filter(link => {\n        if (card.cardName.includes(\"Pents\")) {// let nameWithCoins = card.cardName;\n          // nameWithCoins.replace(\"Pents\", \"Coins\");\n          // console.log(nameWithCoins);\n          // return link.includes(nameWithCoins);\n          //do something\n        } else {\n          //do the regular thing\n          return link.includes(card.cardName);\n        }\n      });\n      console.log(queries);\n    });\n  });\n}\n\nasync function getImgUrl(queryString) {\n  const page = await wiki().page(queryString);\n  const rawImg = await page.rawImages();\n\n  for (let i = 0; i < rawImg.length; i++) {\n    if (rawImg[i].title.includes(\"RWS\")) {\n      return rawImg[i].imageinfo[0].url;\n    }\n  }\n}\n\n;\n\nfunction buildSuits(strArr) {\n  const wands = strArr.filter(imgUrl => imgUrl.includes('Wands'));\n  const pents = strArr.filter(imgUrl => imgUrl.includes('Pents'));\n  const cups = strArr.filter(imgUrl => imgUrl.includes('Cups'));\n  const swords = strArr.filter(imgUrl => imgUrl.includes('Swords'));\n  const suits = [buildCardFromSuit(wands, \"Wands\"), //We will need to handle Pents as it appears as Coins and Pentancles\n  //Throughout the articles on wikipedia...\n  //For example we were using \"Pents\" because that is how it appears in the imgUrl\n  buildCardFromSuit(pents, \"Pents\"), buildCardFromSuit(cups, \"Cups\"), buildCardFromSuit(swords, \"Swords\")];\n  const sortedSuits = suits.map(suit => sortDeck(suit));\n  return sortedSuits;\n}\n\n;\n\nfunction buildCardFromSuit(suitArr, suit) {\n  const cards = suitArr.map(card => {\n    const cardName = makeCardNameFromUrl(card, suit);\n    let id;\n\n    for (let key in helper) {\n      if (cardName.startsWith(helper[key])) {\n        id = key;\n        break;\n      }\n    }\n\n    if (cardName.includes(\"Coins\")) {\n      cardcardName.replace('Coins', 'Pentacles');\n    }\n\n    return {\n      id: Number(id),\n      suit: suit,\n      cardName: cardName,\n      imgUrl: card\n    };\n  });\n  return cards;\n}\n\nfunction makeCardNameFromUrl(urlStr, suit) {\n  const subStr = urlStr.slice(urlStr.indexOf(suit), urlStr.indexOf(\".jpg\"));\n\n  for (let key in helper) {\n    if (subStr.endsWith(key)) {\n      if (suit === 'Pents') {\n        return `${helper[key]} of Coins`;\n      } else {\n        return `${helper[key]} of ${suit}`;\n      }\n    }\n  }\n}\n\nfunction sortDeck(deck) {\n  const sorted = [];\n\n  while (sorted.length < 14) sorted.push(null);\n\n  for (let i = 0; i < deck.length; i++) {\n    sorted[deck[i].id - 1] = deck[i];\n  }\n\n  return sorted;\n}\n\nconst helper = {\n  '01': \"Ace\",\n  '02': \"Two\",\n  '03': \"Three\",\n  '04': \"Four\",\n  '05': \"Five\",\n  '06': \"Six\",\n  '07': \"Seven\",\n  '08': \"Eight\",\n  '09': \"Nine\",\n  '10': \"Ten\",\n  '11': \"Page\",\n  '12': \"Knight\",\n  '13': \"Queen\",\n  '14': \"King\"\n};","map":{"version":3,"sources":["/home/conrad/Documents/tarot/tarot-cards/src/Helpers/getCards.js"],"names":["wiki","getMajorArcana","page","tables","deck","buildDeck","i","length","getImgUrl","queryString","id","deckName","cards","getMinorArcana","images","links","buildSuits","addQueryStringToMinor","map","table","makeQueryString","card","startsWith","cardName","str","replaceAll","console","log","forEach","suit","queries","filter","link","includes","rawImg","rawImages","title","imageinfo","url","strArr","wands","imgUrl","pents","cups","swords","suits","buildCardFromSuit","sortedSuits","sortDeck","suitArr","makeCardNameFromUrl","key","helper","cardcardName","replace","Number","urlStr","subStr","slice","indexOf","endsWith","sorted","push"],"mappings":"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","sourcesContent":["import wiki from 'wikijs';\n\nexport async function getMajorArcana() {\n    const page = await wiki().page('Major_Arcana');\n    const [tables] = await page.tables();\n    let deck = await buildDeck(tables);\n    for (let i = 0; i < deck.length; i++) {\n        deck[i]['url'] = await getImgUrl(deck[i].queryString);\n    }\n    return (\n        {\n            id: 'major',\n            deckName: 'The Major Arcana',\n            cards: deck,\n        }\n    );\n};\n\nexport async function getMinorArcana() {\n    const page = await wiki().page('Minor_Arcana');\n    const images = await page.images();\n    const links = await page.links();\n    // console.log(links);\n    const deck = buildSuits(images);\n    // console.log(deck);\n    //We would like to add a queryString to each card in the minor arcana\n    addQueryStringToMinor(deck, links)\n    return (\n        {\n            id: 'minor',\n            deckName: \"The Minor Arcana\",\n            cards: deck,\n        }\n    );\n};\n\nfunction buildDeck(tables) {\n    const deck = tables.map((table) => {\n        const queryString = makeQueryString(table.card);\n        if (table.card.startsWith(\"Strength\")) {\n            return (\n                {\n                    cardName: \"Strength\",\n                    queryString: queryString,\n                }\n            )\n        };\n        if (table.card.startsWith(\"Justice\")) {\n            return (\n                {\n                    cardName: \"Justice\",\n                    queryString: queryString,\n                }\n            )\n        };\n        return (\n            {\n                cardName: table.card,\n                queryString: queryString,\n            }\n        )\n    });\n    return deck;\n};\n\nfunction makeQueryString(str) {\n    if (str.startsWith(\"Strength\")) str = \"Strength\";\n    if (str.startsWith(\"Justice\")) str = \"Justice\";\n    str = str.replaceAll(\" \", \"_\")\n    str = str + \"_(Tarot_card)\";\n    return str;\n};\n\nfunction addQueryStringToMinor(deck, links) {\n    console.log(deck, links);\n    deck.forEach(suit => {\n        suit.forEach(card => {\n            console.log(card)\n            let queries = links.filter(link => {\n                if (card.cardName.includes(\"Pents\")) {\n                    // let nameWithCoins = card.cardName;\n                    // nameWithCoins.replace(\"Pents\", \"Coins\");\n                    // console.log(nameWithCoins);\n                    // return link.includes(nameWithCoins);\n                    //do something\n                } else {\n                    //do the regular thing\n                    return link.includes(card.cardName);\n                }\n            });\n            console.log(queries);\n        })\n    });\n}\nasync function getImgUrl(queryString) {\n    const page = await wiki().page(queryString);\n    const rawImg = await page.rawImages();\n    for (let i = 0; i < rawImg.length; i++) {\n        if (rawImg[i].title.includes(\"RWS\")) {\n            return (rawImg[i].imageinfo[0].url)\n        }\n    }\n};\n\nfunction buildSuits(strArr) {\n    const wands = strArr.filter(imgUrl => imgUrl.includes('Wands'));\n    const pents = strArr.filter(imgUrl => imgUrl.includes('Pents'));\n    const cups = strArr.filter(imgUrl => imgUrl.includes('Cups'));\n    const swords = strArr.filter(imgUrl => imgUrl.includes('Swords'));\n    const suits = [\n        buildCardFromSuit(wands, \"Wands\"),\n        //We will need to handle Pents as it appears as Coins and Pentancles\n        //Throughout the articles on wikipedia...\n        //For example we were using \"Pents\" because that is how it appears in the imgUrl\n        buildCardFromSuit(pents, \"Pents\"),\n        buildCardFromSuit(cups, \"Cups\"),\n        buildCardFromSuit(swords, \"Swords\"),\n    ];\n    const sortedSuits = suits.map(suit => sortDeck(suit));\n    return sortedSuits;\n};\n\nfunction buildCardFromSuit(suitArr, suit) {\n    const cards = suitArr.map(card => {\n        const cardName = makeCardNameFromUrl(card, suit);\n        let id;\n        for (let key in helper) {\n            if (cardName.startsWith(helper[key])) {\n                id = key;\n                break;\n            }\n        }\n        if (cardName.includes(\"Coins\")) {\n            cardcardName.replace('Coins','Pentacles')\n        }\n        return ({\n            id: Number(id),\n            suit: suit,\n            cardName: cardName,\n            imgUrl: card,\n        });\n\n    });\n    return cards;\n}\n\nfunction makeCardNameFromUrl(urlStr, suit) {\n    const subStr = urlStr.slice(urlStr.indexOf(suit), urlStr.indexOf(\".jpg\"));\n    for (let key in helper) {\n        if (subStr.endsWith(key)) {\n            if (suit === 'Pents') {\n                return `${helper[key]} of Coins`;\n            } else {\n                return `${helper[key]} of ${suit}`;\n            }\n        }\n    }\n}\n\nfunction sortDeck(deck) {\n    const sorted = [];\n    while (sorted.length < 14) sorted.push(null);\n    for (let i = 0; i < deck.length; i++) {\n        sorted[(deck[i].id) - 1] = deck[i];\n    }\n    return sorted;\n}\n\nconst helper = {\n    '01': \"Ace\",\n    '02': \"Two\",\n    '03': \"Three\",\n    '04': \"Four\",\n    '05': \"Five\",\n    '06': \"Six\",\n    '07': \"Seven\",\n    '08': \"Eight\",\n    '09': \"Nine\",\n    '10': \"Ten\",\n    '11': \"Page\",\n    '12': \"Knight\",\n    '13': \"Queen\",\n    '14': \"King\",\n};\n"]},"metadata":{},"sourceType":"module"}