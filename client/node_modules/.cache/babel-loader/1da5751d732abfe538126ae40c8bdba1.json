{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filters = void 0;\n\nvar nth_check_1 = __importDefault(require(\"nth-check\"));\n\nvar boolbase_1 = require(\"boolbase\");\n\nvar attributes_1 = require(\"../attributes\");\n\nvar checkAttrib = attributes_1.attributeRules.equals;\n\nfunction getAttribFunc(name, value) {\n  var data = {\n    type: \"attribute\",\n    action: \"equals\",\n    ignoreCase: false,\n    namespace: null,\n    name: name,\n    value: value\n  };\n  return function attribFunc(next, _rule, options) {\n    return checkAttrib(next, data, options);\n  };\n}\n\nfunction getChildFunc(next, adapter) {\n  return function (elem) {\n    var parent = adapter.getParent(elem);\n    return !!parent && adapter.isTag(parent) && next(elem);\n  };\n}\n\nexports.filters = {\n  contains: function (next, text, _a) {\n    var adapter = _a.adapter;\n    return function contains(elem) {\n      return next(elem) && adapter.getText(elem).includes(text);\n    };\n  },\n  icontains: function (next, text, _a) {\n    var adapter = _a.adapter;\n    var itext = text.toLowerCase();\n    return function icontains(elem) {\n      return next(elem) && adapter.getText(elem).toLowerCase().includes(itext);\n    };\n  },\n  // Location specific methods\n  \"nth-child\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var func = nth_check_1.default(rule);\n    if (func === boolbase_1.falseFunc) return boolbase_1.falseFunc;\n    if (func === boolbase_1.trueFunc) return getChildFunc(next, adapter);\n    return function nthChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n\n      for (var i = 0; i < siblings.length; i++) {\n        if (equals(elem, siblings[i])) break;\n\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-child\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var func = nth_check_1.default(rule);\n    if (func === boolbase_1.falseFunc) return boolbase_1.falseFunc;\n    if (func === boolbase_1.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastChild(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n\n      for (var i = siblings.length - 1; i >= 0; i--) {\n        if (equals(elem, siblings[i])) break;\n\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-of-type\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var func = nth_check_1.default(rule);\n    if (func === boolbase_1.falseFunc) return boolbase_1.falseFunc;\n    if (func === boolbase_1.trueFunc) return getChildFunc(next, adapter);\n    return function nthOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n\n      for (var i = 0; i < siblings.length; i++) {\n        var currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-of-type\": function (next, rule, _a) {\n    var adapter = _a.adapter,\n        equals = _a.equals;\n    var func = nth_check_1.default(rule);\n    if (func === boolbase_1.falseFunc) return boolbase_1.falseFunc;\n    if (func === boolbase_1.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastOfType(elem) {\n      var siblings = adapter.getSiblings(elem);\n      var pos = 0;\n\n      for (var i = siblings.length - 1; i >= 0; i--) {\n        var currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  // TODO determine the actual root element\n  root: function (next, _rule, _a) {\n    var adapter = _a.adapter;\n    return function (elem) {\n      var parent = adapter.getParent(elem);\n      return (parent == null || !adapter.isTag(parent)) && next(elem);\n    };\n  },\n  scope: function (next, rule, options, context) {\n    var equals = options.equals;\n\n    if (!context || context.length === 0) {\n      // Equivalent to :root\n      return exports.filters.root(next, rule, options);\n    }\n\n    if (context.length === 1) {\n      // NOTE: can't be unpacked, as :has uses this for side-effects\n      return function (elem) {\n        return equals(context[0], elem) && next(elem);\n      };\n    }\n\n    return function (elem) {\n      return context.includes(elem) && next(elem);\n    };\n  },\n  // JQuery extensions (others follow as pseudos)\n  checkbox: getAttribFunc(\"type\", \"checkbox\"),\n  file: getAttribFunc(\"type\", \"file\"),\n  password: getAttribFunc(\"type\", \"password\"),\n  radio: getAttribFunc(\"type\", \"radio\"),\n  reset: getAttribFunc(\"type\", \"reset\"),\n  image: getAttribFunc(\"type\", \"image\"),\n  submit: getAttribFunc(\"type\", \"submit\"),\n  // Dynamic state pseudos. These depend on optional Adapter methods.\n  hover: function (next, _rule, _a) {\n    var adapter = _a.adapter;\n    var isHovered = adapter.isHovered;\n\n    if (typeof isHovered !== \"function\") {\n      return boolbase_1.falseFunc;\n    }\n\n    return function hover(elem) {\n      return isHovered(elem) && next(elem);\n    };\n  },\n  visited: function (next, _rule, _a) {\n    var adapter = _a.adapter;\n    var isVisited = adapter.isVisited;\n\n    if (typeof isVisited !== \"function\") {\n      return boolbase_1.falseFunc;\n    }\n\n    return function visited(elem) {\n      return isVisited(elem) && next(elem);\n    };\n  },\n  active: function (next, _rule, _a) {\n    var adapter = _a.adapter;\n    var isActive = adapter.isActive;\n\n    if (typeof isActive !== \"function\") {\n      return boolbase_1.falseFunc;\n    }\n\n    return function active(elem) {\n      return isActive(elem) && next(elem);\n    };\n  }\n};","map":{"version":3,"sources":["/home/conrad/Documents/tarot/tarot-cards/node_modules/cheerio-select-tmp/node_modules/css-select/lib/pseudo-selectors/filters.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","filters","nth_check_1","require","boolbase_1","attributes_1","checkAttrib","attributeRules","equals","getAttribFunc","name","data","type","action","ignoreCase","namespace","attribFunc","next","_rule","options","getChildFunc","adapter","elem","parent","getParent","isTag","contains","text","_a","getText","includes","icontains","itext","toLowerCase","rule","func","default","falseFunc","trueFunc","nthChild","siblings","getSiblings","pos","i","length","nthLastChild","nthOfType","currentSibling","getName","nthLastOfType","root","scope","context","checkbox","file","password","radio","reset","image","submit","hover","isHovered","visited","isVisited","active","isActive"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.filters = void 0;\nvar nth_check_1 = __importDefault(require(\"nth-check\"));\nvar boolbase_1 = require(\"boolbase\");\nvar attributes_1 = require(\"../attributes\");\nvar checkAttrib = attributes_1.attributeRules.equals;\nfunction getAttribFunc(name, value) {\n    var data = {\n        type: \"attribute\",\n        action: \"equals\",\n        ignoreCase: false,\n        namespace: null,\n        name: name,\n        value: value,\n    };\n    return function attribFunc(next, _rule, options) {\n        return checkAttrib(next, data, options);\n    };\n}\nfunction getChildFunc(next, adapter) {\n    return function (elem) {\n        var parent = adapter.getParent(elem);\n        return !!parent && adapter.isTag(parent) && next(elem);\n    };\n}\nexports.filters = {\n    contains: function (next, text, _a) {\n        var adapter = _a.adapter;\n        return function contains(elem) {\n            return next(elem) && adapter.getText(elem).includes(text);\n        };\n    },\n    icontains: function (next, text, _a) {\n        var adapter = _a.adapter;\n        var itext = text.toLowerCase();\n        return function icontains(elem) {\n            return (next(elem) &&\n                adapter.getText(elem).toLowerCase().includes(itext));\n        };\n    },\n    // Location specific methods\n    \"nth-child\": function (next, rule, _a) {\n        var adapter = _a.adapter, equals = _a.equals;\n        var func = nth_check_1.default(rule);\n        if (func === boolbase_1.falseFunc)\n            return boolbase_1.falseFunc;\n        if (func === boolbase_1.trueFunc)\n            return getChildFunc(next, adapter);\n        return function nthChild(elem) {\n            var siblings = adapter.getSiblings(elem);\n            var pos = 0;\n            for (var i = 0; i < siblings.length; i++) {\n                if (equals(elem, siblings[i]))\n                    break;\n                if (adapter.isTag(siblings[i])) {\n                    pos++;\n                }\n            }\n            return func(pos) && next(elem);\n        };\n    },\n    \"nth-last-child\": function (next, rule, _a) {\n        var adapter = _a.adapter, equals = _a.equals;\n        var func = nth_check_1.default(rule);\n        if (func === boolbase_1.falseFunc)\n            return boolbase_1.falseFunc;\n        if (func === boolbase_1.trueFunc)\n            return getChildFunc(next, adapter);\n        return function nthLastChild(elem) {\n            var siblings = adapter.getSiblings(elem);\n            var pos = 0;\n            for (var i = siblings.length - 1; i >= 0; i--) {\n                if (equals(elem, siblings[i]))\n                    break;\n                if (adapter.isTag(siblings[i])) {\n                    pos++;\n                }\n            }\n            return func(pos) && next(elem);\n        };\n    },\n    \"nth-of-type\": function (next, rule, _a) {\n        var adapter = _a.adapter, equals = _a.equals;\n        var func = nth_check_1.default(rule);\n        if (func === boolbase_1.falseFunc)\n            return boolbase_1.falseFunc;\n        if (func === boolbase_1.trueFunc)\n            return getChildFunc(next, adapter);\n        return function nthOfType(elem) {\n            var siblings = adapter.getSiblings(elem);\n            var pos = 0;\n            for (var i = 0; i < siblings.length; i++) {\n                var currentSibling = siblings[i];\n                if (equals(elem, currentSibling))\n                    break;\n                if (adapter.isTag(currentSibling) &&\n                    adapter.getName(currentSibling) === adapter.getName(elem)) {\n                    pos++;\n                }\n            }\n            return func(pos) && next(elem);\n        };\n    },\n    \"nth-last-of-type\": function (next, rule, _a) {\n        var adapter = _a.adapter, equals = _a.equals;\n        var func = nth_check_1.default(rule);\n        if (func === boolbase_1.falseFunc)\n            return boolbase_1.falseFunc;\n        if (func === boolbase_1.trueFunc)\n            return getChildFunc(next, adapter);\n        return function nthLastOfType(elem) {\n            var siblings = adapter.getSiblings(elem);\n            var pos = 0;\n            for (var i = siblings.length - 1; i >= 0; i--) {\n                var currentSibling = siblings[i];\n                if (equals(elem, currentSibling))\n                    break;\n                if (adapter.isTag(currentSibling) &&\n                    adapter.getName(currentSibling) === adapter.getName(elem)) {\n                    pos++;\n                }\n            }\n            return func(pos) && next(elem);\n        };\n    },\n    // TODO determine the actual root element\n    root: function (next, _rule, _a) {\n        var adapter = _a.adapter;\n        return function (elem) {\n            var parent = adapter.getParent(elem);\n            return (parent == null || !adapter.isTag(parent)) && next(elem);\n        };\n    },\n    scope: function (next, rule, options, context) {\n        var equals = options.equals;\n        if (!context || context.length === 0) {\n            // Equivalent to :root\n            return exports.filters.root(next, rule, options);\n        }\n        if (context.length === 1) {\n            // NOTE: can't be unpacked, as :has uses this for side-effects\n            return function (elem) { return equals(context[0], elem) && next(elem); };\n        }\n        return function (elem) { return context.includes(elem) && next(elem); };\n    },\n    // JQuery extensions (others follow as pseudos)\n    checkbox: getAttribFunc(\"type\", \"checkbox\"),\n    file: getAttribFunc(\"type\", \"file\"),\n    password: getAttribFunc(\"type\", \"password\"),\n    radio: getAttribFunc(\"type\", \"radio\"),\n    reset: getAttribFunc(\"type\", \"reset\"),\n    image: getAttribFunc(\"type\", \"image\"),\n    submit: getAttribFunc(\"type\", \"submit\"),\n    // Dynamic state pseudos. These depend on optional Adapter methods.\n    hover: function (next, _rule, _a) {\n        var adapter = _a.adapter;\n        var isHovered = adapter.isHovered;\n        if (typeof isHovered !== \"function\") {\n            return boolbase_1.falseFunc;\n        }\n        return function hover(elem) {\n            return isHovered(elem) && next(elem);\n        };\n    },\n    visited: function (next, _rule, _a) {\n        var adapter = _a.adapter;\n        var isVisited = adapter.isVisited;\n        if (typeof isVisited !== \"function\") {\n            return boolbase_1.falseFunc;\n        }\n        return function visited(elem) {\n            return isVisited(elem) && next(elem);\n        };\n    },\n    active: function (next, _rule, _a) {\n        var adapter = _a.adapter;\n        var isActive = adapter.isActive;\n        if (typeof isActive !== \"function\") {\n            return boolbase_1.falseFunc;\n        }\n        return function active(elem) {\n            return isActive(elem) && next(elem);\n        };\n    },\n};\n"]},"metadata":{},"sourceType":"script"}