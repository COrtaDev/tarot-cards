{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: !0\n}), exports.api = api, exports.pagination = pagination, exports.aggregatePagination = aggregatePagination, exports.aggregate = aggregate, exports.parseContent = parseContent;\n\nvar _crossFetch = require('cross-fetch'),\n    _crossFetch2 = _interopRequireDefault(_crossFetch),\n    _querystring = require('querystring'),\n    _querystring2 = _interopRequireDefault(_querystring);\n\nfunction _interopRequireDefault(a) {\n  return a && a.__esModule ? a : {\n    default: a\n  };\n}\n\nfunction _toConsumableArray(a) {\n  if (Array.isArray(a)) {\n    for (var b = 0, c = Array(a.length); b < a.length; b++) c[b] = a[b];\n\n    return c;\n  }\n\n  return Array.from(a);\n}\n\nvar fetchOptions = {\n  method: 'GET',\n  mode: 'cors',\n  credentials: 'omit'\n};\n\nfunction api(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {},\n      c = Object.assign({\n    format: 'json',\n    action: 'query',\n    redirects: ''\n  }, b);\n  Object.keys(c).forEach(function (f) {\n    c[f] === void 0 && delete c[f];\n  }), a.origin && (c.origin = a.origin);\n\n  var d = a.apiUrl + '?' + _querystring2.default.stringify(c);\n\n  return (0, _crossFetch2.default)(d, Object.assign({\n    headers: a.headers\n  }, fetchOptions)).then(function (f) {\n    return f.json();\n  }).then(function (f) {\n    if (f.error) throw new Error(f.error.info);\n    return f;\n  });\n}\n\nfunction pagination(a, b, c) {\n  return api(a, b).then(function (d) {\n    var f = {\n      results: c(d),\n      query: b.srsearch\n    };\n\n    if (d['continue']) {\n      var g = Object.keys(d['continue']).filter(function (j) {\n        return 'continue' !== j;\n      })[0],\n          h = d['continue'][g];\n      b[g] = h, f.next = function () {\n        return pagination(a, b, c);\n      };\n    }\n\n    return f;\n  });\n}\n\nfunction aggregatePagination(a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : [];\n  return a.then(function (c) {\n    var d = [].concat(_toConsumableArray(b), _toConsumableArray(c.results));\n    return c.next ? aggregatePagination(c.next(), d) : d;\n  });\n}\n\nvar pageLimit = 500;\n\nfunction aggregate(a, b, c, d, f) {\n  var g = 5 < arguments.length && void 0 !== arguments[5] ? arguments[5] : [];\n  return b.list = c, b[f + 'limit'] = pageLimit, api(a, b).then(function (h) {\n    var j = [].concat(_toConsumableArray(g), _toConsumableArray(h.query[c].map(function (l) {\n      return l[d];\n    }))),\n        k = h['query-continue'] || h.continue;\n\n    if (k) {\n      var l = k[c] && k[c][f + 'from'] || k[f + 'continue'];\n      return b[f + 'continue'] = l, b[f + 'from'] = l, aggregate(a, b, c, d, f, j);\n    }\n\n    return j;\n  });\n}\n\nvar headingPattern = /(==+)(?:(?!\\n)\\s?)((?:(?!==|\\n)[^])+)(?:(?!\\n)\\s?)(==+)/g;\n\nfunction getHeadings(a) {\n  for (var b = void 0, c = []; null !== (b = headingPattern.exec(a));) c.push({\n    level: b[1].trim().length,\n    text: b[2].trim(),\n    start: b.index,\n    end: b.index + b[0].length\n  });\n\n  return c;\n}\n\nfunction parseContent(a) {\n  var b = getHeadings(a),\n      c = Math.min.apply(Math, _toConsumableArray(b.map(function (j) {\n    var k = j.level;\n    return k;\n  }))),\n      d = b.map(function (j, k) {\n    var l = b[k + 1],\n        m = a.substring(j.end, l ? l.start : void 0).trim();\n    return {\n      title: j.text,\n      level: j.level - c,\n      id: k,\n      content: m,\n      items: []\n    };\n  }),\n      f = function lastParentLevel(j, k) {\n    if (0 === k) return null;\n\n    for (var l = j - 1; 0 <= l; l--) if (d[l].level < k) return d[l].id;\n\n    return null;\n  };\n\n  d.forEach(function (j, k) {\n    j.parent = f(k, j.level);\n  });\n\n  var g = {\n    items: []\n  },\n      h = function findSection(j) {\n    return d.find(function (k) {\n      return j === k.id;\n    });\n  };\n\n  return d.forEach(function (j) {\n    null === j.parent ? g.items.push(j) : h(j.parent).items.push(j);\n  }), d.forEach(function (j) {\n    delete j.id, delete j.parent, delete j.level, j.items.length || delete j.items;\n  }), g.items;\n}","map":{"version":3,"sources":["../src/util.js"],"names":["fetchOptions","method","mode","credentials","api","Object","format","action","redirects","qs","apiOptions","querystring","headers","res","pagination","results","parseResults","query","params","resolution","aggregatePagination","pageLimit","aggregate","list","prefix","e","continueWith","nextFromKey","nextResults","headingPattern","matches","level","match","text","start","end","parseContent","getHeadings","Math","headings","index","source","heading","next","title","id","content","items","sections","section","lastParentLevel","s","root","findSection"],"mappings":";;;;YASgBI,G,GAAAA,G,UAgCAU,U,GAAAA,U,UAiBAM,mB,GAAAA,mB,UAaAE,S,GAAAA,S,UAkCAc,Y,GAAAA,Y;;;;;;;;;;;;;;;;;;;;;AAtGhB;;AAAA,IAAMpC,YAAAA,GAAe;AACpBC,EAAAA,MAAAA,EADoB,KAAA;AAEpBC,EAAAA,IAAAA,EAFoB,MAAA;AAGpBC,EAAAA,WAAAA,EAHD;AAAqB,CAArB;;AAMO,SAAA,GAAA,CAAA,CAAA,EAAsC;AAAA,MAAA,CAAA,GAAA,IAAA,SAAA,CAAA,MAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAA;AAAA,MACtC,CAAA,GAAKE,MAAAA,CAAAA,MAAAA,CACV;AACCC,IAAAA,MAAAA,EADD,MAAA;AAECC,IAAAA,MAAAA,EAFD,OAAA;AAGCC,IAAAA,SAAAA,EAJSH;AACV,GADUA,EADiC,CACjCA,CADiC;AAU5CA,EAAAA,MAAAA,CAAAA,IAAAA,CAAAA,CAAAA,EAAAA,OAAAA,CAAwB,UAAA,CAAA,EAAO;AAC1BI,IAAAA,CAAAA,CAAAA,CAAAA,CAAAA,KAAAA,KAD0B,CAC1BA,IACH,OAAOA,CAAAA,CAAAA,CAAAA,CADJA;AAXuC,GAU5CJ,GAKIK,CAAAA,CAfwC,MAexCA,KACHD,CAAAA,CAAAA,MAAAA,GAAYC,CAAAA,CAhB+B,MAexCA,CALJL;;AAQA,MAAM,CAAA,GAASK,CAAAA,CAAT,MAASA,GAAT,GAASA,GAAqBC,aAAAA,CAAAA,OAAAA,CAAAA,SAAAA,CAApC,CAAoCA,CAApC;;AACA,SAAO,CAAA,GAAA,YAAA,CAAA,OAAA,EAAA,CAAA,EAENN,MAAAA,CAAAA,MAAAA,CAAc;AAAEO,IAAAA,OAAAA,EAASF,CAAAA,CAAzBL;AAAc,GAAdA,EAFM,YAENA,CAFM,EAAA,IAAA,CAIA,UAAA,CAAA,EAAA;AAAA,WAAOQ,CAAAA,CAAP,IAAOA,EAAP;AAJA,GAAA,EAAA,IAAA,CAKA,UAAA,CAAA,EAAO;AACZ,QAAIA,CAAAA,CAAJ,KAAA,EACC,MAAM,IAAA,KAAA,CAAUA,CAAAA,CAAAA,KAAAA,CAAhB,IAAM,CAAN;AAED,WAAOA,CAAP;AATK,GAAA,CAAP;AAaM;;AAAA,SAAA,UAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAsD;AAC5D,SAAOT,GAAAA,CAAAA,CAAAA,EAAAA,CAAAA,CAAAA,CAAAA,IAAAA,CAA6B,UAAA,CAAA,EAAO;AAC1C,QAAI,CAAA,GAAa;AACNW,MAAAA,OADM,EACIC,CAAAA,CADJ,CACIA,CADJ;AAENC,MAAAA,KAFM,EAEEC,CAAAA,CAFnB;AAAiB,KAAjB;;AAGA,QAAIL,CAAAA,CAAJ,UAAIA,CAAJ,EAAqB;AAAA,UACd,CAAA,GAAeR,MAAAA,CAAAA,IAAAA,CAAYQ,CAAAA,CAAZR,UAAYQ,CAAZR,EAAAA,MAAAA,CACpB,UAAA,CAAA,EAAA;AAAA,eAAO,eAAP,CAAA;AADoBA,OAAAA,EADD,CACCA,CADD;AAAA,UAId,CAAA,GAAcQ,CAAAA,CAAAA,UAAAA,CAAAA,CAJA,CAIAA,CAJA;AAKpBK,MAAAA,CAAAA,CAAAA,CAAAA,CAAAA,GALoB,CAKpBA,EACAC,CAAAA,CAAAA,IAAAA,GAAkB,YAAA;AAAA,eAAML,UAAAA,CAAAA,CAAAA,EAAAA,CAAAA,EAAN,CAAMA,CAAN;AAClB,OAFAI;AAGD;;AAAA,WAAOC,CAAP;AAZMf,GAAAA,CAAP;AAgBM;;AAAA,SAAA,mBAAA,CAAA,CAAA,EAA+D;AAAA,MAAA,CAAA,GAAA,IAAA,SAAA,CAAA,MAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,KAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAA;AACrE,SAAOU,CAAAA,CAAAA,IAAAA,CAAgB,UAAA,CAAA,EAAO;AAC7B,QAAM,CAAA,GAAA,GAAA,MAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,EAAA,kBAAA,CAAkCD,CAAAA,CAAxC,OAAM,CAAA,CAAN;AAD6B,WAEzBA,CAAAA,CAFyB,IAEzBA,GACIO,mBAAAA,CAAoBP,CAAAA,CAApBO,IAAoBP,EAApBO,EAHqB,CAGrBA,CADJP,GAGIE,CALqB;AAAvBD,GAAAA,CAAP;AAUD;;AAAA,IAAMO,SAAAA,GAAN,GAAA;;AAEO,SAAA,SAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAwE;AAAA,MAAA,CAAA,GAAA,IAAA,SAAA,CAAA,MAAA,IAAA,KAAA,CAAA,KAAA,SAAA,CAAA,CAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAA;AAC9EH,SAAAA,CAAAA,CAAAA,IAAAA,GAAcK,CAAdL,EACAA,CAAAA,CAAOM,CAAAA,GAAPN,OAAAA,CAAAA,GAA2BG,SAD3BH,EAEOd,GAAAA,CAAAA,CAAAA,EAAAA,CAAAA,CAAAA,CAAAA,IAAAA,CAA6B,UAAA,CAAA,EAAO;AAAA,QACpC,CAAA,GAAA,GAAA,MAAA,CAAA,kBAAA,CAAA,CAAA,CAAA,EAAA,kBAAA,CAA8BS,CAAAA,CAAAA,KAAAA,CAAAA,CAAAA,EAAAA,GAAAA,CAAoB,UAAA,CAAA,EAAA;AAAA,aAAKY,CAAAA,CAAL,CAAKA,CAAL;AADd,KACNZ,CAA9B,CAAA,CADoC;AAAA,QAEpC,CAAA,GAAeA,CAAAA,CAAAA,gBAAAA,CAAAA,IAAyBA,CAAAA,CAFJ,QAAA;;AAG1C,QAAA,CAAA,EAAkB;AACjB,UAAM,CAAA,GACJa,CAAAA,CAAAA,CAAAA,CAAAA,IAAsBA,CAAAA,CAAAA,CAAAA,CAAAA,CAAmBF,CAAAA,GAA1C,MAAuBE,CAAtBA,IACDA,CAAAA,CAAaF,CAAAA,GAFd,UAECE,CAFD;AAGAR,aAAAA,CAAAA,CAAOM,CAAAA,GAAPN,UAAAA,CAAAA,GAA8BS,CAA9BT,EACAA,CAAAA,CAAOM,CAAAA,GAAPN,MAAAA,CAAAA,GAA0BS,CAD1BT,EAEOI,SAAAA,CAAAA,CAAAA,EAAAA,CAAAA,EAAAA,CAAAA,EAAAA,CAAAA,EAAAA,CAAAA,EAAAA,CAAAA,CAFPJ;AAID;;AAAA,WAAOU,CAAP;AAXMxB,GAAAA,CAFPc;AAiBD;;AAAA,IAAMW,cAAAA,GAAN,0DAAA;;AAEA,SAAA,WAAA,CAAA,CAAA,EAA2B;AAAA,OAAA,IACtB,CAAA,GAAA,KADsB,CAAA,EAEpB,CAAA,GAFoB,EAAA,EAGnB,UAAC,CAAA,GAAQA,cAAAA,CAAAA,IAAAA,CAHU,CAGVA,CAAT,CAHmB,GAIzBC,CAAAA,CAAAA,IAAAA,CAAa;AACZC,IAAAA,KAAAA,EAAOC,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,IAAAA,GADK,MAAA;AAEZC,IAAAA,IAAAA,EAAMD,CAAAA,CAAAA,CAAAA,CAAAA,CAFM,IAENA,EAFM;AAGZE,IAAAA,KAAAA,EAAOF,CAAAA,CAHK,KAAA;AAIZG,IAAAA,GAAAA,EAAKH,CAAAA,CAAAA,KAAAA,GAAcA,CAAAA,CAAAA,CAAAA,CAAAA,CAJpBF;AAAa,GAAbA;;AAOD,SAAOA,CAAP;AAGM;;AAAA,SAAA,YAAA,CAAA,CAAA,EAA8B;AAAA,MAC9B,CAAA,GAAWO,WAAAA,CADmB,CACnBA,CADmB;AAAA,MAG9B,CAAA,GAAWC,IAAAA,CAAAA,GAAAA,CAAAA,KAAAA,CAAAA,IAAAA,EAAAA,kBAAAA,CAAYC,CAAAA,CAAAA,GAAAA,CAAa,UAAA,CAAA,EAAA;AAAA,QAAA,CAAA,GAAA,CAAA,CAAA,KAAA;AAAA,WAAA,CAAA;AAHN,GAGPA,CAAZD,CAAAA,CAHmB;AAAA,MAK9B,CAAA,GAAWC,CAAAA,CAAAA,GAAAA,CAAa,UAAA,CAAA,EAAA,CAAA,EAAoB;AAAA,QAC3C,CAAA,GAAOA,CAAAA,CAASC,CAAAA,GAD2B,CACpCD,CADoC;AAAA,QAE3C,CAAA,GAAUE,CAAAA,CAAAA,SAAAA,CACJC,CAAAA,CADID,GAAAA,EACSE,CAAAA,GAAOA,CAAAA,CAAPA,KAAAA,GAAAA,KADTF,CAAAA,EAFiC,IAEjCA,EAFiC;AAKjD,WAAO;AACNG,MAAAA,KAAAA,EAAOF,CAAAA,CADD,IAAA;AAENX,MAAAA,KAAAA,EAAOW,CAAAA,CAAAA,KAAAA,GAFD,CAAA;AAGNG,MAAAA,EAAAA,EAHM,CAAA;AAINC,MAAAA,OAAAA,EAJM,CAAA;AAKNC,MAAAA,KAAAA,EALM;AAAA,KAAP;AAVmC,GAKnBR,CALmB;AAAA,MAmB9B,CAAA,GAAA,SAAA,eAAA,CAAkB,CAAlB,EAAkB,CAAlB,EAAoC;AACzC,QAAI,MAAJ,CAAA,EAAiB,OAAA,IAAA;;AACjB,SAAK,IAAI,CAAA,GAAIC,CAAAA,GAAb,CAAA,EAAwB,KAAxB,CAAA,EAAgC,CAAhC,EAAA,EACC,IAAIQ,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,KAAAA,GAAJ,CAAA,EACC,OAAOA,CAAAA,CAAAA,CAAAA,CAAAA,CAAP,EAAA;;AAGF,WAAO,IAAP;AA1BmC,GAAA;;AA8BpCA,EAAAA,CAAAA,CAAAA,OAAAA,CAAiB,UAAA,CAAA,EAAA,CAAA,EAAoB;AACpCC,IAAAA,CAAAA,CAAAA,MAAAA,GAAiBC,CAAAA,CAAAA,CAAAA,EAAuBD,CAAAA,CAAvBC,KAAAA,CAAjBD;AA/BmC,GA8BpCD;;AA9BoC,MAkC9B,CAAA,GAAO;AACZD,IAAAA,KAAAA,EAnCmC;AAkCvB,GAlCuB;AAAA,MAsC9B,CAAA,GAAA,SAAA,WAAA,CAAc,CAAd,EAAc;AAAA,WAAMC,CAAAA,CAAAA,IAAAA,CAAc,UAAA,CAAA,EAAA;AAAA,aAAKH,CAAAA,KAAOM,CAAAA,CAAZ,EAAA;AAApB,KAAMH,CAAN;AAtCgB,GAAA;;AAyCpCA,SAAAA,CAAAA,CAAAA,OAAAA,CAAiB,UAAA,CAAA,EAAW;AACvB,aAAA,CAAA,CADuB,MACvB,GACHI,CAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CAF0B,CAE1BA,CADG,GAGHC,CAAAA,CAAYJ,CAAAA,CAAZI,MAAAA,CAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CAAAA,CAAAA,CAHG;AADLL,GAAAA,GASAA,CAAAA,CAAAA,OAAAA,CAAiB,UAAA,CAAA,EAAW;AAC3B,WAAOC,CAAAA,CADoB,EAC3B,EACA,OAAOA,CAAAA,CAFoB,MAC3B,EAEA,OAAOA,CAAAA,CAHoB,KAC3B,EAGKA,CAAAA,CAAAA,KAAAA,CAJsB,MAItBA,IACJ,OAAOA,CAAAA,CAAQF,KAJhB;AADDC,GAAAA,CATAA,EAkBOI,CAAAA,CAAKL,KAlBZC;AAmBA","sourcesContent":["import fetch from 'cross-fetch';\nimport querystring from 'querystring';\n\nconst fetchOptions = {\n\tmethod: 'GET',\n\tmode: 'cors',\n\tcredentials: 'omit'\n};\n\nexport function api(apiOptions, params = {}) {\n\tconst qs = Object.assign(\n\t\t{\n\t\t\tformat: 'json',\n\t\t\taction: 'query',\n\t\t\tredirects: ''\n\t\t},\n\t\tparams\n\t);\n\t// Remove undefined properties\n\tObject.keys(qs).forEach(key => {\n\t\tif (qs[key] === undefined) {\n\t\t\tdelete qs[key];\n\t\t}\n\t});\n\tif (apiOptions.origin) {\n\t\tqs.origin = apiOptions.origin;\n\t}\n\tconst url = `${apiOptions.apiUrl}?${querystring.stringify(qs)}`;\n\treturn fetch(\n\t\turl,\n\t\tObject.assign({ headers: apiOptions.headers }, fetchOptions)\n\t)\n\t\t.then(res => res.json())\n\t\t.then(res => {\n\t\t\tif (res.error) {\n\t\t\t\tthrow new Error(res.error.info);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n}\n\nexport function pagination(apiOptions, params, parseResults) {\n\treturn api(apiOptions, params).then(res => {\n\t\tlet resolution = {};\n\t\tresolution.results = parseResults(res);\n\t\tresolution.query = params.srsearch;\n\t\tif (res['continue']) {\n\t\t\tconst continueType = Object.keys(res['continue']).filter(\n\t\t\t\tkey => key !== 'continue'\n\t\t\t)[0];\n\t\t\tconst continueKey = res['continue'][continueType];\n\t\t\tparams[continueType] = continueKey;\n\t\t\tresolution.next = () => pagination(apiOptions, params, parseResults);\n\t\t}\n\t\treturn resolution;\n\t});\n}\n\nexport function aggregatePagination(pagination, previousResults = []) {\n\treturn pagination.then(res => {\n\t\tconst results = [...previousResults, ...res.results];\n\t\tif (res.next) {\n\t\t\treturn aggregatePagination(res.next(), results);\n\t\t} else {\n\t\t\treturn results;\n\t\t}\n\t});\n}\n\nconst pageLimit = 500;\n\nexport function aggregate(apiOptions, params, list, key, prefix, results = []) {\n\tparams.list = list;\n\tparams[prefix + 'limit'] = pageLimit;\n\treturn api(apiOptions, params).then(res => {\n\t\tconst nextResults = [...results, ...res.query[list].map(e => e[key])];\n\t\tconst continueWith = res['query-continue'] || res.continue;\n\t\tif (continueWith) {\n\t\t\tconst nextFromKey =\n\t\t\t\t(continueWith[list] && continueWith[list][prefix + 'from']) ||\n\t\t\t\tcontinueWith[prefix + 'continue'];\n\t\t\tparams[prefix + 'continue'] = nextFromKey;\n\t\t\tparams[prefix + 'from'] = nextFromKey;\n\t\t\treturn aggregate(apiOptions, params, list, key, prefix, nextResults);\n\t\t}\n\t\treturn nextResults;\n\t});\n}\n\nconst headingPattern = /(==+)(?:(?!\\n)\\s?)((?:(?!==|\\n)[^])+)(?:(?!\\n)\\s?)(==+)/g;\n\nfunction getHeadings(text) {\n\tlet match;\n\tconst matches = [];\n\twhile ((match = headingPattern.exec(text)) !== null) {\n\t\tmatches.push({\n\t\t\tlevel: match[1].trim().length,\n\t\t\ttext: match[2].trim(),\n\t\t\tstart: match.index,\n\t\t\tend: match.index + match[0].length\n\t\t});\n\t}\n\treturn matches;\n}\n\nexport function parseContent(source) {\n\tconst headings = getHeadings(source);\n\n\tconst minLevel = Math.min(...headings.map(({ level }) => level));\n\n\tconst sections = headings.map((heading, index) => {\n\t\tconst next = headings[index + 1];\n\t\tconst content = source\n\t\t\t.substring(heading.end, next ? next.start : undefined)\n\t\t\t.trim();\n\t\treturn {\n\t\t\ttitle: heading.text,\n\t\t\tlevel: heading.level - minLevel,\n\t\t\tid: index,\n\t\t\tcontent,\n\t\t\titems: []\n\t\t};\n\t});\n\n\tconst lastParentLevel = (index, level) => {\n\t\tif (level === 0) return null;\n\t\tfor (let i = index - 1; i >= 0; i--) {\n\t\t\tif (sections[i].level < level) {\n\t\t\t\treturn sections[i].id;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\t// Set parents\n\tsections.forEach((section, index) => {\n\t\tsection.parent = lastParentLevel(index, section.level);\n\t});\n\n\tconst root = {\n\t\titems: []\n\t};\n\n\tconst findSection = id => sections.find(s => id === s.id);\n\n\t// Organize\n\tsections.forEach(section => {\n\t\tif (section.parent === null) {\n\t\t\troot.items.push(section);\n\t\t} else {\n\t\t\tfindSection(section.parent).items.push(section);\n\t\t}\n\t});\n\n\t// Clean up\n\tsections.forEach(section => {\n\t\tdelete section.id;\n\t\tdelete section.parent;\n\t\tdelete section.level;\n\t\tif (!section.items.length) {\n\t\t\tdelete section.items;\n\t\t}\n\t});\n\n\treturn root.items;\n}\n"]},"metadata":{},"sourceType":"script"}