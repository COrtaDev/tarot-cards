{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compileGeneralSelector = void 0;\n\nvar attributes_1 = require(\"./attributes\");\n\nvar pseudo_selectors_1 = require(\"./pseudo-selectors\");\n/*\n * All available rules\n */\n\n\nfunction compileGeneralSelector(next, selector, options, context, compileToken) {\n  var adapter = options.adapter,\n      equals = options.equals;\n\n  switch (selector.type) {\n    case \"pseudo-element\":\n      throw new Error(\"Pseudo-elements are not supported by css-select\");\n\n    case \"attribute\":\n      if (options.strict && (selector.ignoreCase || selector.action === \"not\")) {\n        throw new Error(\"Unsupported attribute selector\");\n      }\n\n      return attributes_1.attributeRules[selector.action](next, selector, options);\n\n    case \"pseudo\":\n      return pseudo_selectors_1.compilePseudoSelector(next, selector, options, context, compileToken);\n    // Tags\n\n    case \"tag\":\n      return function tag(elem) {\n        return adapter.getName(elem) === selector.name && next(elem);\n      };\n    // Traversal\n\n    case \"descendant\":\n      if (options.cacheResults === false || typeof WeakSet === \"undefined\") {\n        return function descendant(elem) {\n          var current = elem;\n\n          while (current = adapter.getParent(current)) {\n            if (adapter.isTag(current) && next(current)) {\n              return true;\n            }\n          }\n\n          return false;\n        };\n      } // @ts-expect-error `ElementNode` is not extending object\n      // eslint-disable-next-line no-case-declarations\n\n\n      var isFalseCache_1 = new WeakSet();\n      return function cachedDescendant(elem) {\n        var current = elem;\n\n        while (current = adapter.getParent(current)) {\n          if (!isFalseCache_1.has(current)) {\n            if (adapter.isTag(current) && next(current)) {\n              return true;\n            }\n\n            isFalseCache_1.add(current);\n          }\n        }\n\n        return false;\n      };\n\n    case \"_flexibleDescendant\":\n      // Include element itself, only used while querying an array\n      return function flexibleDescendant(elem) {\n        var current = elem;\n\n        do {\n          if (adapter.isTag(current) && next(current)) return true;\n        } while (current = adapter.getParent(current));\n\n        return false;\n      };\n\n    case \"parent\":\n      if (options.strict) {\n        throw new Error(\"Parent selector isn't part of CSS3\");\n      }\n\n      return function parent(elem) {\n        return adapter.getChildren(elem).some(function (elem) {\n          return adapter.isTag(elem) && next(elem);\n        });\n      };\n\n    case \"child\":\n      return function child(elem) {\n        var parent = adapter.getParent(elem);\n        return !!parent && adapter.isTag(parent) && next(parent);\n      };\n\n    case \"sibling\":\n      return function sibling(elem) {\n        var siblings = adapter.getSiblings(elem);\n\n        for (var i = 0; i < siblings.length; i++) {\n          var currentSibling = siblings[i];\n          if (equals(elem, currentSibling)) break;\n\n          if (adapter.isTag(currentSibling) && next(currentSibling)) {\n            return true;\n          }\n        }\n\n        return false;\n      };\n\n    case \"adjacent\":\n      return function adjacent(elem) {\n        var siblings = adapter.getSiblings(elem);\n        var lastElement;\n\n        for (var i = 0; i < siblings.length; i++) {\n          var currentSibling = siblings[i];\n          if (equals(elem, currentSibling)) break;\n\n          if (adapter.isTag(currentSibling)) {\n            lastElement = currentSibling;\n          }\n        }\n\n        return !!lastElement && next(lastElement);\n      };\n\n    case \"universal\":\n      return next;\n  }\n}\n\nexports.compileGeneralSelector = compileGeneralSelector;","map":{"version":3,"sources":["/home/conrad/Documents/tarot/tarot-cards/node_modules/cheerio-select-tmp/node_modules/css-select/lib/general.js"],"names":["Object","defineProperty","exports","value","compileGeneralSelector","attributes_1","require","pseudo_selectors_1","next","selector","options","context","compileToken","adapter","equals","type","Error","strict","ignoreCase","action","attributeRules","compilePseudoSelector","tag","elem","getName","name","cacheResults","WeakSet","descendant","current","getParent","isTag","isFalseCache_1","cachedDescendant","has","add","flexibleDescendant","parent","getChildren","some","child","sibling","siblings","getSiblings","i","length","currentSibling","adjacent","lastElement"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compileGeneralSelector = void 0;\nvar attributes_1 = require(\"./attributes\");\nvar pseudo_selectors_1 = require(\"./pseudo-selectors\");\n/*\n * All available rules\n */\nfunction compileGeneralSelector(next, selector, options, context, compileToken) {\n    var adapter = options.adapter, equals = options.equals;\n    switch (selector.type) {\n        case \"pseudo-element\":\n            throw new Error(\"Pseudo-elements are not supported by css-select\");\n        case \"attribute\":\n            if (options.strict &&\n                (selector.ignoreCase || selector.action === \"not\")) {\n                throw new Error(\"Unsupported attribute selector\");\n            }\n            return attributes_1.attributeRules[selector.action](next, selector, options);\n        case \"pseudo\":\n            return pseudo_selectors_1.compilePseudoSelector(next, selector, options, context, compileToken);\n        // Tags\n        case \"tag\":\n            return function tag(elem) {\n                return adapter.getName(elem) === selector.name && next(elem);\n            };\n        // Traversal\n        case \"descendant\":\n            if (options.cacheResults === false ||\n                typeof WeakSet === \"undefined\") {\n                return function descendant(elem) {\n                    var current = elem;\n                    while ((current = adapter.getParent(current))) {\n                        if (adapter.isTag(current) && next(current)) {\n                            return true;\n                        }\n                    }\n                    return false;\n                };\n            }\n            // @ts-expect-error `ElementNode` is not extending object\n            // eslint-disable-next-line no-case-declarations\n            var isFalseCache_1 = new WeakSet();\n            return function cachedDescendant(elem) {\n                var current = elem;\n                while ((current = adapter.getParent(current))) {\n                    if (!isFalseCache_1.has(current)) {\n                        if (adapter.isTag(current) && next(current)) {\n                            return true;\n                        }\n                        isFalseCache_1.add(current);\n                    }\n                }\n                return false;\n            };\n        case \"_flexibleDescendant\":\n            // Include element itself, only used while querying an array\n            return function flexibleDescendant(elem) {\n                var current = elem;\n                do {\n                    if (adapter.isTag(current) && next(current))\n                        return true;\n                } while ((current = adapter.getParent(current)));\n                return false;\n            };\n        case \"parent\":\n            if (options.strict) {\n                throw new Error(\"Parent selector isn't part of CSS3\");\n            }\n            return function parent(elem) {\n                return adapter\n                    .getChildren(elem)\n                    .some(function (elem) { return adapter.isTag(elem) && next(elem); });\n            };\n        case \"child\":\n            return function child(elem) {\n                var parent = adapter.getParent(elem);\n                return !!parent && adapter.isTag(parent) && next(parent);\n            };\n        case \"sibling\":\n            return function sibling(elem) {\n                var siblings = adapter.getSiblings(elem);\n                for (var i = 0; i < siblings.length; i++) {\n                    var currentSibling = siblings[i];\n                    if (equals(elem, currentSibling))\n                        break;\n                    if (adapter.isTag(currentSibling) && next(currentSibling)) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n        case \"adjacent\":\n            return function adjacent(elem) {\n                var siblings = adapter.getSiblings(elem);\n                var lastElement;\n                for (var i = 0; i < siblings.length; i++) {\n                    var currentSibling = siblings[i];\n                    if (equals(elem, currentSibling))\n                        break;\n                    if (adapter.isTag(currentSibling)) {\n                        lastElement = currentSibling;\n                    }\n                }\n                return !!lastElement && next(lastElement);\n            };\n        case \"universal\":\n            return next;\n    }\n}\nexports.compileGeneralSelector = compileGeneralSelector;\n"]},"metadata":{},"sourceType":"script"}